CREATE TABLE cdr (calldate datetime DEFAULT '0000-00-00 00:00:00' NOT NULL, clid varchar(80) NOT NULL, src varchar(80) NOT NULL, dst varchar(80) NOT NULL, dcontext varchar(80) NOT NULL, channel varchar(80) NOT NULL, dstchannel varchar(80) NOT NULL, lastapp varchar(80) NOT NULL, lastdata varchar(80) NOT NULL, duration int DEFAULT '0' NOT NULL, billsec int DEFAULT '0' NOT NULL, disposition varchar(45) NOT NULL, amaflags int DEFAULT '0' NOT NULL, accountcode varchar(20) NOT NULL, uniqueid varchar(32) NOT NULL, userfield varchar(255) NOT NULL, cost varchar(10), site_id int, id int(10) unsigned NOT NULL AUTO_INCREMENT, PRIMARY KEY (id), INDEX idx_cdr_calldate (calldate), INDEX idx_cdr_dst (dst), INDEX idx_cdr_src (src), INDEX idx_cdr_uniqueid (uniqueid), INDEX fk_site (site_id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;;
CREATE TABLE cdr_query (id int NOT NULL AUTO_INCREMENT, site_id int, query text, active bit, created datetime, partner_id varchar(25), PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;;
CREATE TABLE discipline_group (id int NOT NULL AUTO_INCREMENT, name varchar(25), description varchar(25), site_id int, group_id int, PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;;
CREATE TABLE partner (id int NOT NULL AUTO_INCREMENT, site_id int, name varchar(25), description varchar(50), accountcode int, group_id int, discipline_id int, PRIMARY KEY (id), CONSTRAINT key_partner_acc_code UNIQUE (site_id, accountcode), INDEX fk_grp_id (group_id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;;
CREATE TABLE partner_group (id int NOT NULL AUTO_INCREMENT, name varchar(25), description varchar(50), site_id int, PRIMARY KEY (id), INDEX site_id (site_id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;;
CREATE TABLE site (id int NOT NULL AUTO_INCREMENT, name varchar(25), description varchar(50), PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=UTF8;
